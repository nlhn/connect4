<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>TOOT/OTTO</title>
    <link rel="stylesheet" href="stylesheet/style.css">
  </head>
  <body>
    <div id="navbar">
      <ul>
        <li>
          <a href="playConnect4.html">Connect4</a>
        </li>
        <li>
          <a>TOOT/OTTO</a>
        </li>
        <li>
          <a href="howToPlay.html">How to Play</a>
        </li>
        <li>
          <a href="settings.html">Settings</a>
        </li>
      </ul>
    </div>
    <h1>Toot and Otto</h1>
    <noscript>This page contains webassembly and javascript content,
    please enable javascript in your browser.</noscript>
    <script src="./bootstrap.js"></script>
    <br>
    <form>
      <b><label for="TboardSize">Choose a board size:</label></b><br>
      <input type="radio" id="board_0" name="TboardSize" value="0" required>
      <label for="board_0">Standard</label><br>
      <input type="radio" id="board_1" name="TboardSize" value="1">
      <label for="board_1">Large</label><br>
      <br>
      <b><label for="TgameMode">Choose a game mode:</label></b><br>
      <input type="radio" id="gamemode_0" name="TgameMode" value="0" required>
      <label for="gamemode_0">VS Human</label><br>
      <input type="radio" id="gamemode_1" name="TgameMode" value="1">
      <label for="gamemode_1">VS Computer (Easy)</label><br>
      <input type="radio" id="gamemode_2" name="TgameMode" value="2">
      <label for="gamemode_2">VS Computer (Hard)</label><br>
    
      <br>
      <b><label for="TplayAs">Player (Player 1 if PVP) will play as:</label></b><br>
      <input type="radio" id="player_T" name="Tplayer" value="T" required>
      <label for="vsComputer1">TOOT</label><br>
      <input type="radio" id="player_O" name="Tplayer" value="O">
      <label for="vsComputer2">OTTO</label><br>
    </form>
    <br>
  <div class="token-legend">
    <div class="outrow" id="legend">
      <div class="outcol">
        <label for="faketoken_1" class="fake-token-label">T</label>
        <input name="faketoken_1" class="fake-token cell empty-cell toot-token" disabled="disabled"></input>
      </div>
      <div class="outcol">
        <label for="faketoken_2" class="fake-token-label">O</label>
        <input name="faketoken_2" class="fake-token cell empty-cell otto-token" disabled="disabled"></input>
      </div>
    </div>
  </div>
    <br>
    <button id="TootOttoButton">New Game</button>
    <div id="tokens" style="display: none;">
        <input type="radio" id="tokenT" name="token" value="T" checked>
        <label for="tokenT">T</label>
        <input type="radio" id="tokenO" name="token" value="O">
        <label for="tokenO">O</label>
    </div>
    <div id="TootOttoGameBoard" class="gameBoard"></div>
    <div id="winnerDisplay"></div>
    <br><br><br><br>
    <script>    
      document.getElementById('TootOttoButton').addEventListener('click', function() {
          var boardSizeElements = document.getElementsByName('TboardSize');
          var gameModeElements = document.getElementsByName('TgameMode');
          var playerElements = document.getElementsByName('Tplayer');
          var selectedSize = -1;
          var selectedMode = -1;
          var selectedPlayer = -1;

          for (var i = 0; i < boardSizeElements.length; i++) {
              if (boardSizeElements[i].checked) {
                  selectedSize = parseInt(boardSizeElements[i].value, 10);
                  break;
              }
          }

          for (var i = 0; i < gameModeElements.length; i++) {
              if (gameModeElements[i].checked) {
                  selectedMode = parseInt(gameModeElements[i].value, 10);
                  break;
              }
          }

            for (var i = 0; i < playerElements.length; i++) {
                if (playerElements[i].checked) {
                    selectedPlayer = (playerElements[i].value);
                    break;
                }
            }

          if (selectedSize != -1 && selectedMode != -1) {
              document.getElementById('tokens').style.display = "flex";
              document.getElementById('tokens').style.justifyContent = "center";
              document.getElementById('tokens').style.alignItems = 'center';
              newGameToot(selectedSize, selectedMode, selectedPlayer);
              drawBoardToot(selectedSize, selectedMode, selectedPlayer);
          }
        });

        // wait for onLoadToot to be available
        var timer = window.setInterval(function() {
          if (onLoadToot != undefined) {
            window.clearInterval(timer);
            onLoadToot();
            handleTheme();
          } else {
            console.log("waiting for onLoadToot to be available")
          }
        }, 100);

        window.onload = function() {
           handleTheme();
        };
  </script>
  </body>
</html>